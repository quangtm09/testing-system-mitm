<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" template="layout/template.xhtml">

	<ui:define name="body" id="candidateBody">
		<h:outputLabel value="#{messages['com.bosch.ui.invalidURL']}"
			rendered="#{not caPrivilege.viewableCandidate}" />

		<h:form id="candidateViewForm"
			rendered="#{caPrivilege.viewableCandidate}">
			<s:div styleClass="header-lable-align">
				<h:outputLabel value="#{messages['candidate.view.details']}"
					styleClass="header-label " />
			</s:div>

			<!--General information-->
			<s:div styleClass="header-border">
				<h:panelGrid columns="2">
					<s:decorate id="cddNameField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.name']}:" />
						</ui:define>
						<h:outputText id="cddName" maxlength="50"
							value="#{candidateHome.instance.cddPrefix} #{candidateHome.instance.cddName}">
						</h:outputText>
					</s:decorate>

					<s:decorate template="layout/display.xhtml">
						<rich:spacer />
					</s:decorate>

					<s:decorate id="cddStatusField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.status']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddStatus}" />
					</s:decorate>

					<s:decorate id="joinDateField" template="layout/display.xhtml"
						rendered="#{candidateHome.instance.cddStatus eq 'JOINED'}">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.joindate']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddJoiningDate}">
							<s:convertDateTime type="both" pattern="#{messages['calendar.pattern']}" />
						</h:outputText>
					</s:decorate>

					<s:decorate id="cddDobField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.dateofbirth']}:" />
						</ui:define>
						<h:outputText id="cddDob" value="#{candidateHome.instance.cddDob}">
							<s:convertDateTime type="both" pattern="#{messages['calendar.pattern']}" />
						</h:outputText>

					</s:decorate>

					<s:decorate id="cddEmailField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.email']}:" />
						</ui:define>
						<h:outputText id="cddEmail"
							value="#{candidateHome.instance.cddEmail}">
						</h:outputText>
					</s:decorate>

					<s:decorate id="cddidentifynumberField"
						template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.identifynumber']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddIdentityCard}" />
					</s:decorate>

					<s:decorate id="cddAddressField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.address']}:" />
						</ui:define>
						<h:outputText id="cddAddress" styleClass="wordWrap"
							value="#{candidateHome.instance.cddAddress}">
						</h:outputText>
					</s:decorate>

					<s:decorate id="cddPhoneNoField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.contactnumber']} 1:" />
						</ui:define>
						<h:outputText id="cddPhoneNo"
							value="#{candidateHome.contactNumber1}">
						</h:outputText>
					</s:decorate>

					<s:decorate id="cddPhoneNoField2" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.contactnumber']} 2:" />
						</ui:define>
						<h:outputText id="cddPhoneNo2"
							value="#{candidateHome.contactNumber2}">
						</h:outputText>
					</s:decorate>


					<s:decorate id="cddEducationDegreeField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.educationdegree']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddDegree1}" />
					</s:decorate>

					<s:decorate id="cddUniversityField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['com.bosch.ui.university']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddGraduationUniversity}" />
					</s:decorate>
					
					<s:decorate template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.graduation.time']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.graduationTime}" />
					</s:decorate>
					
					<s:decorate template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.current.company']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.currentCompany}" />
					</s:decorate>
					
					<s:decorate template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.current.position']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.currentPosition}" />
					</s:decorate>
					
					<s:decorate template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.position.applied']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.positionApplied}"/>
					</s:decorate>
					
					<s:decorate template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.faculty']}:" />
						</ui:define>
						<h:outputText
							value="#{candidateHome.instance.cddGraduationFaculty}" />
					</s:decorate>

					<s:decorate id="cddOrgUnitField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['org.unit']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.orgUnit.unitName}" />
					</s:decorate>

					<s:decorate id="cddRequestNumberField"
						template="layout/display.xhtml" style="width:100%">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.applyforrequest']}:" />
						</ui:define>
						<h:outputText
							value="#{candidateHome.instance.recruitRequest.recruitRequestName}" />
					</s:decorate>

					<s:decorate id="cddYearOfExperienceField"
						template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputText value="#{messages['com.bosch.ui.overallyearofexperience']}:" />
						</ui:define>
						<h:outputText
							value="#{candidateHome.instance.cddYearOfExperience}" />
					</s:decorate>
					
					<s:decorate template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['com.bosch.ui.relevantexperiences']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddRelevantExperience}" />
					</s:decorate>
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.tinme.of.cv.received']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.timeOfCvReceived}" >
							<s:convertDateTime type="both" pattern="#{messages['calendar.pattern']}"/>
						</h:outputText>						
					</s:decorate>					
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.handled.by']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.handledBy}" />						
					</s:decorate>
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.tinme.of.cv.sent']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.timeOfCvSent}" >
							<s:convertDateTime type="both" pattern="#{messages['calendar.pattern']}"/>
						</h:outputText>			
					</s:decorate>
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.shortlist.by']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.shortListBy}" />					
					</s:decorate>
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.shortlist.result']}:" />
						</ui:define>
						<h:outputText value="#{messages['candidate.shortlist.result.0']}" rendered="#{candidateHome.instance.shortListResult eq 0}"/>
						<h:outputText value="#{messages['candidate.shortlist.result.1']}" rendered="#{candidateHome.instance.shortListResult eq 1}"/>
						<h:outputText value="" rendered="#{empty candidateHome.instance.shortListResult}"/>						
					</s:decorate>
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.tested.on']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.testedOn}" >
							<s:convertDateTime type="both" pattern="#{messages['calendar.pattern']}"/>
						</h:outputText>					
					</s:decorate>
					
					<s:decorate	template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['candidate.tested.result']}:" />
						</ui:define>
						<h:outputText value="#{messages['candidate.tested.result.0']}" rendered="#{candidateHome.instance.testedResult eq 0}"/>
						<h:outputText value="#{messages['candidate.tested.result.1']}" rendered="#{candidateHome.instance.testedResult eq 1}"/>
						<h:outputText value="" rendered="#{empty candidateHome.instance.testedResult}"/>	
					</s:decorate>
					
					<s:decorate id="cddPriorityField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['com.bosch.ui.priority']}:" />
						</ui:define>
						<h:outputText
							value="#{candidatePriorityHelper.getPriorityStr(candidateHome.instance.cddPriority)}" />
					</s:decorate>

					<s:decorate id="cddSourceField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['com.bosch.ui.source']}:" />
						</ui:define>
						<h:outputText value="#{candidateHome.instance.cddSource}"
							rendered="#{ candidateHome.instance.cddSource != 'Referral' 
									and candidateHome.instance.cddSource != 'Please select'}"
							cols="30" rows="5" />
						<h:outputText value="#{candidateHome.instance.cddEmployeeId}"
							rendered="#{ candidateHome.instance.cddSource eq 'Referral'}" />
						<h:outputText value="#{' - '}"
							rendered="#{not empty (candidateHome.instance.cddEmployeeId) and not empty (candidateHome.instance.cddEmployeeName)}" />
						<h:outputText value="#{candidateHome.instance.cddEmployeeName}"
							rendered="#{ candidateHome.instance.cddSource eq 'Referral'}" />
					</s:decorate>

					<s:decorate id="cddDescriptField" template="layout/display.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['com.bosch.ui.description']}:" />
						</ui:define>
						<h:outputText
							value="#{candidateHome.instance.cddSkillDescription}" cols="30"
							rows="5" />
					</s:decorate>
				</h:panelGrid>

				<!--Candidate Skills-->
				<s:div styleClass="rts-text-align">
					<rich:dataTable id="skillCandiadteTable"
						value="#{candidateHome.instance.candidateHasSkills.toArray()}"
						rowClasses="brightRow,darkRow"
						rendered="#{not empty candidateHome.instance.candidateHasSkills}"
						var="item" style="width:100%;">

						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['com.bosch.ui.skillname']}" />
							</f:facet>
							<h:outputText value="#{item.skill.sklName}" style="width:70%" />
						</rich:column>

						<rich:column styleClass="textCenterAlign">
							<f:facet name="header">
								<h:outputText
									value="#{messages['com.bosch.ui.yearofexperience']}" />
							</f:facet>
							<h:outputText value="#{item.chs_Exerinece_Years}" />
						</rich:column>

						<rich:column styleClass="textCenterAlign">
							<f:facet name="header">
								<h:outputText
									value="#{messages['candiadte.header.skill.level']}" />
							</f:facet>
							<h:outputText value="#{item.skillLevel}" />
						</rich:column>

					</rich:dataTable>
				</s:div>

				<!--Candidate Resumes-->
				<s:div styleClass="rts-text-align">
					<rich:dataTable id="CandidateResumeTable" var="_doc"
						value="#{candidateHome.instance.attachments.toArray()}"
						rendered="#{not empty candidateHome.instance.attachments}"
						rowClasses="brightRow,darkRow" style="width:100%">
						<rich:column>
							<f:facet name="header">
								<h:outputLabel value="#{messages['upload.file.name']}" />
							</f:facet>
							<h:outputText value="#{_doc.chaAttachmentName}"
								styleClass="wordWrap" />
						</rich:column>

						<rich:column styleClass="textCenterAlign">
							<f:facet name="header">
								<h:outputLabel value="#{messages['upload.file.length']}" />
							</f:facet>
							<h:outputText value="#{_doc.toString()}" />
						</rich:column>

						<rich:column styleClass="textCenterAlign">
							<f:facet name="header">
								<h:outputLabel value="#{messages['upload.uploaded.on']}" />
							</f:facet>
							<h:outputText value="#{_doc.chaAttachmentCreatedOn}">
								<s:convertDateTime type="both" pattern="#{messages['calendar.pattern']}" />
							</h:outputText>
						</rich:column>

						<rich:column styleClass="textCenterAlign">
							<f:facet name="header">
								<h:outputLabel value="#{messages['upload.status']}" />
							</f:facet>
							<h:outputText value="#{_doc.chaAttachmentStatus}" />
						</rich:column>

						<rich:column styleClass="textCenterAlign">
							<f:facet name="header">
								<h:outputLabel value="#{messages['upload.download']}" />
							</f:facet>
							<s:download src="/ResourceProvider.xhtml"
								rendered="#{not empty _doc.chaAttachmentName}">
								<h:graphicImage value="/img/iconDocument.gif" />
								<f:param name="attachmentId" value="#{_doc.chaAttachmentId}" />
								<f:param name="candidateId"	value="#{candidateHome.instance.cddCandidateId}" />
								<f:param name="cid"	value="#{conversation.id}" />		
							</s:download>
						</rich:column>
					</rich:dataTable>
				</s:div>

				<div style="clear: both">
					<span><rich:spacer height="5" /> </span>
				</div>
				<s:div styleClass="bottom-border">
					<a:commandButton
						action="#{candidateBussinessBean.resetStatusMessages()}"
						oncomplete="Richfaces.hideModalPanel('ajaxLoadingModalBox');Richfaces.showModalPanel('changeCandidateStatusModelPanel')"
						onclick="Richfaces.showModalPanel('ajaxLoadingModalBox',{width:50, top:200});"
						rendered="#{caPrivilege.changeableCandidateStatus}"
						styleClass="submitStandard"
						reRender="changeCandidateStatusModelPanel"
						value="#{messages['com.bosch.ui.changestatus']}" />
					<s:button includePageParams="false" propagation="join"
						styleClass="submitStandard" view="/CandidateList.xhtml"
						id="backButton" value="#{resource['Button.Back']}"
						onclick="Richfaces.showModalPanel('ajaxLoadingModalBox',{width:50, top:200});">
						<f:param name="fromView" value="/Candidate.xhtml" />
					</s:button>
				</s:div>
			</s:div>
		</h:form>
		<ui:include src="/ChangeCandidateStatusPanel.xhtml" />
	</ui:define>
</ui:composition>
