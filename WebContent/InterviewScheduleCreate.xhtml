<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" template="layout/template.xhtml">
	<ui:define name="body">
		<script type="text/javascript" src="#{request.getContextPath()}/script/interviewScheduleCal.js"/>
	 	<style>
			.rich-calendar-input  {
				width: 200px;
			}
		</style>
		<h:form id="interviewScheduleCreateForm" styleClass="edit">
			<a:loadScript src="/script/utility.js" />
			<s:div style="padding-top: 20px;">
				<h:outputLabel value="#{messages['create.interview.schedule']}"
					styleClass="header-label" />
			</s:div>

			<s:div styleClass="header-border">
				<h:panelGrid columns="2">
					<s:decorate template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['interview.schedule.candidate']}:" />
						</ui:define>
						
						<rich:comboBox id="recruitRequestCombobox" width="225" 
							requiredMessage="#{messages['error.select.required']} #{' '} #{messages['interview.schedule.candidate']}"
							styleClass="rtsSelectOneMenu"
							suggestionValues="#{interviewScheduleHome.candidates}"
							converter="commonConverter" required="true"
							enableManualInput="true"
							value="#{interviewScheduleHome.instance.candidate}">
							<a:support event="onchange" ajaxSingle="true" limitToList="true"
								ignoreDupResponses="true" 
								reRender="matchedUserText,cddRecruitRequestField"
								action="#{interviewScheduleHome.initialiseRecruitRequest()}">
							</a:support>
						</rich:comboBox>
					</s:decorate>
					
					<s:decorate>
						<rich:spacer/>
					</s:decorate>

					<s:decorate id="cddRecruitRequestField" template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['com.bosch.ui.appliedforrequest']}:" />
						</ui:define>
						<h:inputText
							value="#{interviewScheduleHome.instance.recruitRequest}"
							disabled="true" 
							styleClass="rtsTextBox" 
							rendered="#{not empty interviewScheduleHome.instance.recruitRequest}"/>
						<h:outputText value="#{messages['interview.schdedule.no.request']}" 
								style="color:#F7921E;"
								rendered="#{not empty interviewScheduleHome.instance.candidate and empty interviewScheduleHome.instance.recruitRequest}"
								id="matchedUserText"/>
					</s:decorate>
					<s:decorate id="cddApplyForLevelField" template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['interview.apply.for.level']}:" />
						</ui:define>
						<h:selectOneMenu styleClass="rtsSelectOneMenu"
							value="#{interviewScheduleHome.instance.itsApplyForLevel}"
							required="true"
							requiredMessage="#{messages['error.select.required']} #{' '} #{messages['interview.apply.for.level']}">
							<s:selectItems value="#{interviewScheduleHome.appliedForLevels}" 
								var="level" 
								label="#{level.displayName}"/>
							<s:convertEntity/>	
						</h:selectOneMenu>
					</s:decorate>
				</h:panelGrid>

				<h:panelGrid columns="1">
					<s:decorate template="layout/editInterviewers.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['int.sch.interviewers']}:" />
						</ui:define>

						<rich:pickList id="inteviewersListId"
							value="#{interviewScheduleHome.selectedInterviewers}"							 
							required="true"
							requiredMessage="#{messages['error.select.required']} #{' '} #{messages['int.sch.interviewers']}"
							rendered="#{not empty interviewScheduleHome.interviewerList}">
							<s:selectItems var="_int"
								value="#{interviewScheduleHome.interviewerList}"
								label="#{_int.usrFullName}" />
							<s:convertEntity />
						</rich:pickList>
						<h:outputText value="#{messages['interview.schdedule.no.interviewers']}" 
								style="color:#F7921E;padding-left:10px;"
								rendered="#{empty interviewScheduleHome.interviewerList}"
								id="matchedInterviewersText"/>
					</s:decorate>
				</h:panelGrid>				

				<h:panelGrid columns="2">
					<s:decorate id="itsInterviewTimeFieldTechnical"
						template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['interview.schedule.technical']} #{messages['interview.at']}:" />
						</ui:define>
 						<rich:calendar id="itsInterviewTimeTechnical" 
 							required="true" 							
							requiredMessage="#{messages['error.enter.required']} #{' '} #{messages['interview.schedule.technical']} #{messages['interview.at']}"
							value="#{interviewScheduleHome.instance.itsTechnicalInterviewTime}"
							datePattern="#{messages['calendar.pattern.long']}"
							showApplyButton="false"
							defaultTime="9:30"
							locale="#{calendarBean.locale}"
							enableManualInput="false"
							monthLabels="#{messages['calendar.month.labels']}" 
							isDayEnabled="disablementFunction"
							dayStyleClass="disabledClassesProv"
							boundaryDatesMode="scroll">
							<f:validator validatorId="interviewScheduleDateComparator"/>
							<f:attribute name="hrDateComponent" value="#{hrDateComponent}"/>
						</rich:calendar>	
					</s:decorate>

					<s:decorate id="itsInterviewTimeFieldHr"
						template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['interview.schedule.hr']} #{messages['interview.at']}:" />
						</ui:define>
						<rich:calendar id="itsInterviewTimeHr" 
							value="#{interviewScheduleHome.instance.itsHrInterviewTime}"
							datePattern="#{messages['calendar.pattern.long']}"
							showApplyButton="false" 
							defaultTime="9:30"							
							locale="#{calendarBean.locale}"
							enableManualInput="false"
							monthLabels="#{messages['calendar.month.labels']}" 
							isDayEnabled="disablementFunction"
							dayStyleClass="disabledClassesProv"
							binding="#{hrDateComponent}"/>
					</s:decorate>

					<s:decorate id="itsTechnicalInterviewLocation"
						template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['interview.schedule.technical.location']}:" />
						</ui:define>
						<h:inputText required="true"
							requiredMessage="#{messages['error.enter.required']} #{' '} #{messages['interview.schedule.technical.location']}"
							value="#{interviewScheduleHome.instance.itsTechnicalLocation}"
							styleClass="rtsTextBox" maxlength="50" />
					</s:decorate>

					<s:decorate id="itsHrInterviewLocation"
						template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['interview.schedule.hr.location']}:" />
						</ui:define>
						<h:inputText
							value="#{interviewScheduleHome.instance.itsHrLocation}"
							styleClass="rtsTextBox" maxlength="50" />
					</s:decorate>

					<s:decorate template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['interview.schedule.technical.mode']}:" />
						</ui:define>
						<h:selectOneMenu id="itsTechnicalInterViewMode"
							styleClass="rtsSelectOneMenu"
							value="#{interviewScheduleHome.instance.itsTechnicalInterviewType}"
							required="true"
							requiredMessage="#{messages['error.select.required']} #{' '} #{messages['interview.schedule.technical.mode']}">
							<f:selectItem itemLabel="#{messages['selectOptions']}" />
							<f:selectItem
								itemLabel="#{messages['recurit.request.customer.tel']}"
								itemValue="#{messages['recurit.request.customer.tel']}" />
							<f:selectItem
								itemLabel="#{messages['recurit.request.customer.personal']}"
								itemValue="#{messages['recurit.request.customer.personal']}" />
						</h:selectOneMenu>
					</s:decorate>

					<s:decorate template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel value="#{messages['interview.schedule.hr.mode']}:" />
						</ui:define>
						<h:selectOneMenu id="itsHrInterViewMode"
							styleClass="rtsSelectOneMenu"
							value="#{interviewScheduleHome.instance.itsHRInterviewType}">
							<f:selectItem itemLabel="#{messages['selectOptions']}" />
							<f:selectItem
								itemLabel="#{messages['recurit.request.customer.tel']}"
								itemValue="#{messages['recurit.request.customer.tel']}" />
							<f:selectItem
								itemLabel="#{messages['recurit.request.customer.personal']}"
								itemValue="#{messages['recurit.request.customer.personal']}" />
						</h:selectOneMenu>
					</s:decorate>

					<s:decorate template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['int.sch.technical']} #{' '} #{messages['com.bosch.ui.remark']}:" />
						</ui:define>

						<h:inputTextarea id="itrsTechnicalInterviewScheduleRemark"
							styleClass="itrsTechnicalInterviewScheduleRemark rtsTextarea"
							value="#{interviewScheduleHome.instance.itsTechnicalRemark}"
							required="false" />
					</s:decorate>

					<s:decorate template="layout/edit.xhtml">
						<ui:define name="label">
							<h:outputLabel
								value="#{messages['int.sch.hr']} #{' '} #{messages['com.bosch.ui.remark']}:" />
						</ui:define>

						<h:inputTextarea id="itrsHrInterviewScheduleRemark"
							styleClass="itrsHrInterviewScheduleRemark rtsTextarea"
							value="#{interviewScheduleHome.instance.itsHRRemark}" />
					</s:decorate>

				</h:panelGrid>

				<s:div styleClass="bottom-border">
					<h:commandButton id="save" styleClass="submitStandard"
						value="#{messages['Button.Save']}"
						action="#{interviewScheduleHome.createInterviewSchedule()}"
						onclick="Richfaces.showModalPanel('ajaxLoadingModalBox',{width:50, top:200});"
						disabled="#{empty interviewScheduleHome.interviewerList}">
						<s:defaultAction />
					</h:commandButton>

					<s:button id="cancel" 
						includePageParams="false" 
						propagation="join"
						styleClass="submitStandard" 
						view="/InterviewScheduleList.xhtml"
						value="#{resource['Button.Cancel']}"
						onclick="Richfaces.showModalPanel('ajaxLoadingModalBox',{width:50, top:200});" />
						
					<s:button id="back" 
						includePageParams="false" 
						propagation="join"
						styleClass="submitStandard" 
						view="#{candidateHome.fromView}"
						value="#{resource['Button.Back']}"
						onclick="Richfaces.showModalPanel('ajaxLoadingModalBox',{width:50, top:200});" 
						rendered="#{not empty candidateHome.fromView}"/>
				</s:div>
			</s:div>
		</h:form>

	</ui:define>

</ui:composition>
